-- SERVER PostgreSQL13

-- database BD_ControlVacaciones

//Schema
muni_villanueva

CREATE TABLE muni_villanueva.tb_departamentos
(
    depto_id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    depto_nombre character varying(75) NOT NULL,
    depto_descripcion character varying(200) NOT NULL,
    CONSTRAINT tb_departamentos_pkey PRIMARY KEY (depto_id)
)

//////////////////////////////////////////////////////////

Policia Municipal - Departamento el cual se encarga de la Seguridad Municipal de Villa Nueva

********************************************************

CREATE TABLE muni_villanueva.tb_cargos
(
    cargo_id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    depto_id integer NOT NULL,
    cargo_nombre character varying(75) NOT NULL,
    cargo_descripcion character varying(200) NOT NULL,
    CONSTRAINT tb_cargos_pkey PRIMARY KEY (cargo_id),
    CONSTRAINT fk_depto_id_tb_departamentos FOREIGN KEY (depto_id)
        REFERENCES muni_villanueva.tb_departamentos (depto_id)
)

///////////////////////////////////////////////////////////////////
1 - Desarrollador Web - Persona encargada de dar mantenimiento al portal web
2 - Director - Persona la cual es encargada de todo el departamento de la Policia Municipal
3 - Jefe Inmediato - Persona la cual esta encargada de un sector del departamento
5 - Monitor de Camaras - Persona encargada de supervisar las cámaras de seguridad en el centro de monitoreo de villa nueva
6 - Encargado de Monitores - Persona encargada de supervirsar a los monitores en el horario correspondiente
*******************************************************************

CREATE TABLE muni_villanueva.tb_empleados
(
    empleado_id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    cargo_id integer NOT NULL,
    depto_id integer NOT NULL,
    vacaciones_id integer NOT NULL,
    empleado_codigo character varying(25) NOT NULL,
    "empleado_contraseña" character varying(50) NOT NULL,
    empleado_nombre1 character varying(25) NOT NULL,
    empleado_nombre2 character varying(25),
    empleado_apellido1 character varying(25)NOT NULL,
    empleado_apellido2 character varying(25),
    apellido_casada character varying(25),
    fecha_nacimiento date NOT NULL,
    empleado_telefono character varying(12) NOT NULL,
    empleado_direccion character varying(150) NOT NULL,
    empleado_estado integer NOT NULL,
    fecha_ingreso date NOT NULL,
    empleado_permiso integer,
    emplado_ultimavacafin date,
    empleado_ultimavacainicio date,
    emp_diasvacaciones integer,
    CONSTRAINT tb_empleados_pkey PRIMARY KEY (empleado_id),
    CONSTRAINT fk_cargo_id_tb_emepleados_tb_cargos FOREIGN KEY (cargo_id)
        REFERENCES muni_villanueva.tb_cargos (cargo_id),
    CONSTRAINT fk_depto_id_tb_empleados_tb_departamentos FOREIGN KEY (depto_id)
        REFERENCES muni_villanueva.tb_departamentos (depto_id),
    CONSTRAINT fk_vacaciones_id_tb_empleados_tb_vacaciones FOREIGN KEY (vacaciones_id)
        REFERENCES muni_villanueva.tb_vacaciones (vacaciones_id)
)

CREATE TABLE muni_villanueva.tb_estadosolicitudes
(
    estados_id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    estados_nombre character varying(25) NOT NULL,
    CONSTRAINT tb_estadosolicitudes_pkey PRIMARY KEY (estados_id)
)

///////////////////////////////////////////////////////////////////
1 - Enviada
2 - Revision I
3 - Abrobada
4 - Denegada
*******************************************************************

CREATE TABLE muni_villanueva.tb_solicitudes
(
    solicitud_id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    empleado_id integer NOT NULL,
    cargo_id integer NOT NULL,
    depto_id integer NOT NULL,
    vacaciones_id integer NOT NULL,
    estados_id integer NOT NULL,
    solicitud_fecha date NOT NULL,
    detalles_solicitud character varying(200) NOT NULL,
    fechas_seleccionadas character varying(500) NOT NULL,
    cantidad_dias integer NOT NULL,
    comentario character varying(300)",
    estado_sele_director character varying(100),
    estado_sele_jefe character varying(100),
    periodo_vacas character varying(50) NOT NULL,
    CONSTRAINT tb_solicitudes_pkey PRIMARY KEY (solicitud_id),
    CONSTRAINT fk_cargo_id_tb_solicitudes_tb_cargos FOREIGN KEY (cargo_id)
        REFERENCES muni_villanueva.tb_cargos (cargo_id),
    CONSTRAINT fk_depto_id_tb_solicitudes_tb_departamentos FOREIGN KEY (depto_id)
        REFERENCES muni_villanueva.tb_departamentos (depto_id),
    CONSTRAINT fk_empleado_id_tb_solicitudes_tb_empleados FOREIGN KEY (empleado_id)
        REFERENCES muni_villanueva.tb_empleados (empleado_id),
    CONSTRAINT fk_estados_id_tb_solicitudes_tb_estadosolicitudes FOREIGN KEY (estados_id)
        REFERENCES muni_villanueva.tb_estadosolicitudes (estados_id),
    CONSTRAINT fk_vacaciones_id_tb_solicitudes_tb_vacaciones FOREIGN KEY (vacaciones_id)
        REFERENCES muni_villanueva.tb_vacaciones (vacaciones_id)
)

CREATE TABLE muni_villanueva.tb_vacaciones
(
    vacaciones_id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    vacaciones_estado character varying(50) NOT NULL,
    vacaciones_tiempo integer NOT NULL,
    CONSTRAINT tb_vacaciones_pkey PRIMARY KEY (vacaciones_id)
)


